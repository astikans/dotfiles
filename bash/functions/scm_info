_scm_info() {
  local s=
  if [[ -d ".svn" ]] ; then
    local r=$(svn info | sed -n -e '/^Revision: \([0-9]*\).*$/s//\1/p' )
    s="r$r"
  else
    local b=`git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e 's/* //'`
    if [[ -n "${b}" ]] ; then
      # dirty?
      if [[ $(git status 2> /dev/null | tail -n1) != "nothing to commit (working directory clean)" ]]; then
        s="$b *" 
      else
        s="$b"
      fi
    fi
  fi
  s="${s:+${s} }"
  printf "$s"
}
